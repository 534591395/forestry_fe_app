webpackJsonp([13],{pp6f:function(e,o){},uCMJ:function(e,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=s("Xxa5"),r=s.n(t),n=s("exGp"),a=s.n(n),i={name:"Login",beforeDestroy:function(){clearInterval(this.nTimer)},data:function(){return{bShowPwd:!1,sSendCodeContent:"发送验证码",nSecond:0,nTimer:-1,oErrMsg:{sUsernameErrMsg:"",sPasswordErrMsg:""},oLoginFormData:{sUsername:"",sPassword:"",sLoginType:"password"}}},methods:{loginSubmit:function(){var e=this;return a()(r.a.mark(function o(){var s;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s=!1,""==e.oLoginFormData.sUsername&&(e.oErrMsg.sUsernameErrMsg="此项不能为空",s=!0),""==e.oLoginFormData.sPassword&&(e.oErrMsg.sPasswordErrMsg="此项不能为空",s=!0),!s){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,e.$store.dispatch("login",{oLoginFormData:e.oLoginFormData,oVm:e});case 7:e.$store.getters.oUserInfo.id&&e.$router.push({name:"home"});case 8:case"end":return o.stop()}},o,e)}))()},getCode:function(e){var o=this;this.$http({url:"/auth/getCode4Login",method:"GET",params:{phone:this.oLoginFormData.sUsername}}).then(function(s){s&&0==s.data.code&&(o.$toast.success("验证码已发送"),e&&e())})},sendCode:function(){var e=this;this.handleUsernameInputBlur(),""==this.oErrMsg.sUsernameErrMsg&&this.getCode(function(){e.nSecond=60,document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="none",document.querySelectorAll("#sendCodeBtn")[0].style.color="#ccc",e.sSendCodeContent=e.nSecond+"秒后重新发送验证码",e.nTimer=setInterval(function(){e.sSendCodeContent=--e.nSecond+"秒后重新发送验证码",0==e.nSecond&&(clearInterval(e.nTimer),document.querySelectorAll("#sendCodeBtn")[0]&&(document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="auto"),document.querySelectorAll("#sendCodeBtn")[0]&&(document.querySelectorAll("#sendCodeBtn")[0].style.color="#01B6AF"),e.sSendCodeContent="发送验证码")},1e3)})},handleUsernameInputBlur:function(){""==this.oLoginFormData.sUsername?this.oErrMsg.sUsernameErrMsg="此项不能为空":this.oErrMsg.sUsernameErrMsg=""},handlePasswordInputBlur:function(){""==this.oLoginFormData.sPassword?this.oErrMsg.sPasswordErrMsg="此项不能为空":this.oErrMsg.sPasswordErrMsg=""},changeLoginType:function(e){this.oLoginFormData={sUsername:"",sPassword:"",sLoginType:e},this.oErrMsg={sUsernameErrMsg:"",sPasswordErrMsg:""},0!=this.nSecond&&"code"==e&&this.$nextTick(function(){document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="none",document.querySelectorAll("#sendCodeBtn")[0].style.color="#ccc"})},changeShowPwd:function(){this.bShowPwd=!this.bShowPwd},skipNewPath:function(e){this.$router.push({name:e})}}},c={render:function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",{staticClass:"login"},[s("div",{staticClass:"register-wrapper"},[s("a",{staticClass:"register",attrs:{href:"javascript: void(0);"},on:{click:function(o){e.skipNewPath("register")}}},[e._v("注册")])]),e._v(" "),e._m(0),e._v(" "),s("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-bottom":"20px"},attrs:{border:!1}},[s("van-field",{attrs:{placeholder:"请输入手机号","left-icon":"phone-o",type:"number","error-message":e.oErrMsg.sUsernameErrMsg},on:{blur:e.handleUsernameInputBlur},model:{value:e.oLoginFormData.sUsername,callback:function(o){e.$set(e.oLoginFormData,"sUsername",o)},expression:"oLoginFormData.sUsername"}},[s("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[e._v("1")])])],1),e._v(" "),s("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},["password"==e.oLoginFormData.sLoginType?s("van-field",{attrs:{placeholder:"登录密码（6-18位、数字组合）","left-icon":"bag-o","error-message":e.oErrMsg.sPasswordErrMsg,"right-icon":e.bShowPwd?"closed-eye":"eye-o",type:e.bShowPwd?"":"password"},on:{"click-right-icon":e.changeShowPwd,blur:e.handlePasswordInputBlur},model:{value:e.oLoginFormData.sPassword,callback:function(o){e.$set(e.oLoginFormData,"sPassword",o)},expression:"oLoginFormData.sPassword"}}):e._e(),e._v(" "),"code"==e.oLoginFormData.sLoginType?s("van-field",{attrs:{placeholder:"短信验证码","left-icon":"label-o","error-message":e.oErrMsg.sPasswordErrMsg,type:"number"},on:{blur:e.handlePasswordInputBlur},model:{value:e.oLoginFormData.sPassword,callback:function(o){e.$set(e.oLoginFormData,"sPassword",o)},expression:"oLoginFormData.sPassword"}},["code"==e.oLoginFormData.sLoginType?s("a",{staticClass:"send-code",attrs:{slot:"button",id:"sendCodeBtn",href:"javascript: void(0);"},on:{click:e.sendCode},slot:"button"},[e._v("\n        "+e._s(e.sSendCodeContent)+"\n      ")]):e._e()]):e._e()],1),e._v(" "),"password"==e.oLoginFormData.sLoginType?s("div",{staticClass:"forget-wrapper"},[s("a",{staticClass:"forget",attrs:{href:"javascript: void(0);"},on:{click:function(o){e.skipNewPath("resetPwd")}}},[e._v("忘记密码")])]):e._e(),e._v(" "),"code"==e.oLoginFormData.sLoginType?s("div",{staticClass:"forget-wrapper",staticStyle:{height:"13px"}}):e._e(),e._v(" "),s("div",{staticClass:"btn change-button-background"},[s("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:e.loginSubmit}},[e._v("登陆")])],1),e._v(" "),"password"==e.oLoginFormData.sLoginType?s("div",{staticClass:"login-type",on:{click:function(o){e.changeLoginType("code")}}},[s("a",{staticClass:"forget",attrs:{href:"javascript: void(0);"}},[e._v("短信验证码登录")])]):e._e(),e._v(" "),"code"==e.oLoginFormData.sLoginType?s("div",{staticClass:"login-type",on:{click:function(o){e.changeLoginType("password")}}},[s("a",{staticClass:"forget",attrs:{href:"javascript: void(0);"}},[e._v("账号密码登录")])]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,o=this._self._c||e;return o("div",{staticClass:"img-wrapper"},[o("img",{staticClass:"img",attrs:{src:s("vRwt"),alt:""}})])}]};var d=s("VU/8")(i,c,!1,function(e){s("pp6f")},"data-v-41c7c574",null);o.default=d.exports}});
//# sourceMappingURL=13.e859249bbe5c13c105c6.js.map