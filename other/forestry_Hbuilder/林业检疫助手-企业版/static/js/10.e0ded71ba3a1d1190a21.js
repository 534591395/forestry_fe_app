webpackJsonp([10],{FLES:function(t,o){},HQp9:function(t,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),e=a("exGp"),n=a.n(e),l=a("mvHQ"),i=a.n(l),c={name:"SetCompanyInfo",components:{UploadPicture:a("SJTH").a},created:function(){window.$storage.get("isReg")||(this.oFormData=JSON.parse(i()(this.$store.getters.oCompanyInfo)),this.statusObject[3].text="审核未通过，被拒原因: "+this.oFormData.refuse_reason)},data:function(){return{sComponent:"info",oFormData:{id:0,name:"",corporation:"",code:"",phone:"",address:"",store:"",companyType:[],source:[],outCityCompany:!1,outCityCompanyName:"",kind:"",saw:"",sawOutput:"",other:"",otherOutput:"",product:"",saleArea:"",saleMount:"",remark:"",licencePic:"",cardFrontPic:"",cardOppositePic:"",notificationPic:"",commitPic:""},oErrMsg:{nameErrMsg:"",corporationErrMsg:"",codeErrMsg:"",phoneErrMsg:"",addressErrMsg:"",storeErrMsg:"",companyTypeErrMsg:"",sourceErrMsg:"",kindErrMsg:""},statusObject:{1:{img:a("3EKw"),backgroundColor:"#01B6AF",text:"已提交，等待工作人员审核"},2:{img:a("eprD"),backgroundColor:"#01B6AF",text:"已注册"},3:{img:a("KWn/"),backgroundColor:"#FF8F3B",text:""},4:{img:a("KWn/"),backgroundColor:"#FF8F3B",text:"已注销"}}}},methods:{submit:function(){var t=this;if(window.$underscore.isEqual(this.oFormData,this.$store.getters.oCompanyInfo))this.$router.push({name:"setEmployee"});else if(!this.validatePicForm()){var o=JSON.parse(i()(this.oFormData));o.companyType=o.companyType.toString(),o.source=o.source.toString(),o.outCityCompany=o.outCityCompany?1:0,this.$http({url:"/company/editCompany",method:"POST",data:o}).then(function(o){o&&0==o.data.code&&(t.$toast.success("提交企业信息成功"),t.$router.push({name:"setEmployee"}))})}},handleInputBlur:function(t,o){"string"==o&&""==this.oFormData[t]?this.oErrMsg[t+"ErrMsg"]="此项不能为空":"array"==o&&0==this.oFormData[t].length?this.oErrMsg[t+"ErrMsg"]="此项不能为空":this.oErrMsg[t+"ErrMsg"]=""},validateInfoForm:function(){var t=!1;return""==this.oFormData.name&&(this.oErrMsg.nameErrMsg="此项不能为空",t=!0),""==this.oFormData.corporation&&(this.oErrMsg.corporationErrMsg="此项不能为空",t=!0),""==this.oFormData.phone&&(this.oErrMsg.phoneErrMsg="此项不能为空",t=!0),""==this.oFormData.address&&(this.oErrMsg.addressErrMsg="此项不能为空",t=!0),""==this.oFormData.store&&(this.oErrMsg.storeErrMsg="此项不能为空",t=!0),0==this.oFormData.companyType.length&&(this.oErrMsg.companyTypeErrMsg="此项不能为空",t=!0),0==this.oFormData.source.length&&(this.oErrMsg.sourceErrMsg="此项不能为空",t=!0),""==this.oFormData.kind&&(this.oErrMsg.kindErrMsg="此项不能为空",t=!0),t},validatePicForm:function(){return""==this.oFormData.licencePic?(this.$toast("请提交企业营业执照照片"),!0):""==this.oFormData.cardFrontPic?(this.$toast("请提交法人身份证正反面照片"),!0):""==this.oFormData.cardOppositePic?(this.$toast("请提交法人身份证正反面照片"),!0):""==this.oFormData.notificationPic?(this.$toast("请提交林业植物检疫监管告知书照片"),!0):""==this.oFormData.commitPic&&(this.$toast("请提交木材调运检疫开证承诺书照片"),!0)},next:function(){this.validateInfoForm()||(this.sComponent="picture")},setLicencePictureUrl:function(t){this.oFormData.licencePic=t},setCardFrontPictureUrl:function(t){this.oFormData.cardFrontPic=t},setCardOppositePictureUrl:function(t){this.oFormData.cardOppositePic=t},setNotificationPictureUrl:function(t){this.oFormData.notificationPic=t},setCommitPictureUrl:function(t){this.oFormData.commitPic=t},savePic2SysGallery:function(t){var o=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.$store.dispatch("savePic2SysGallery",{sType:t,oVm:o});case 2:o.$toast.success("已下载至手机相册");case 3:case"end":return a.stop()}},a,o)}))()}}},p={render:function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"setCompanyInfo",style:{background:"picture"==t.sComponent?"#F8F8F8":"#FFFFFF"}},[t.$window.$storage.get("isReg")||"info"!==t.sComponent?a("van-nav-bar",{attrs:{fixed:"","left-arrow":"info"!=t.sComponent,title:"info"==t.sComponent?"企业信息":"企业证件照上传"},on:{"click-left":function(o){t.sComponent="info"}}}):a("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"企业信息"},on:{"click-left":function(o){t.$router.push({name:"companySetting"})}}}),t._v(" "),t.oFormData.status?a("div",{staticClass:"setCompanyInfo-status",style:{backgroundColor:t.statusObject[t.oFormData.status].backgroundColor}},[a("div",{staticClass:"flex-center-y setCompanyInfo-status-top"},[a("img",{staticClass:"setCompanyInfo-status-top__img",attrs:{src:t.statusObject[t.oFormData.status].img,alt:""}}),t._v(" "),a("span",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.statusObject[t.oFormData.status].text))])]),t._v(" "),a("p",{staticClass:"setCompanyInfo-status-bottom"},[t._v(t._s(t.oFormData.last_modify_time))])]):t._e(),t._v(" "),"info"==t.sComponent?a("div",{staticClass:"info"},[a("p",{staticClass:"title"},[t._v("企业基本信息")]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"企业名称",placeholder:"请输入企业名称",required:"","error-message":t.oErrMsg.nameErrMsg},on:{blur:function(o){t.handleInputBlur("name","string")}},model:{value:t.oFormData.name,callback:function(o){t.$set(t.oFormData,"name",o)},expression:"oFormData.name"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"企业法人",placeholder:"请输入法人姓名",required:"","error-message":t.oErrMsg.corporationErrMsg},on:{blur:function(o){t.handleInputBlur("corporation","string")}},model:{value:t.oFormData.corporation,callback:function(o){t.$set(t.oFormData,"corporation",o)},expression:"oFormData.corporation"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"信用代码",placeholder:"请输入信用代码",required:"","error-message":t.oErrMsg.codeErrMsg},on:{blur:function(o){t.handleInputBlur("code","string")}},model:{value:t.oFormData.code,callback:function(o){t.$set(t.oFormData,"code",o)},expression:"oFormData.code"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"联系电话",placeholder:"请输入联系电话",required:"","error-message":t.oErrMsg.phoneErrMsg},on:{blur:function(o){t.handleInputBlur("phone","string")}},model:{value:t.oFormData.phone,callback:function(o){t.$set(t.oFormData,"phone",o)},expression:"oFormData.phone"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"企业地址",placeholder:"请输入企业地址",required:"","error-message":t.oErrMsg.addressErrMsg},on:{blur:function(o){t.handleInputBlur("address","string")}},model:{value:t.oFormData.address,callback:function(o){t.$set(t.oFormData,"address",o)},expression:"oFormData.address"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"仓储地点",placeholder:"请输入仓储地点，以逗号分隔",required:"",type:"textarea",rows:"2","error-message":t.oErrMsg.storeErrMsg},on:{blur:function(o){t.handleInputBlur("store","string")}},model:{value:t.oFormData.store,callback:function(o){t.$set(t.oFormData,"store",o)},expression:"oFormData.store"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"企业类型",required:"",disabled:"","error-message":t.oErrMsg.companyTypeErrMsg},on:{blur:function(o){t.handleInputBlur("companyType","array")}}},[a("van-checkbox-group",{attrs:{slot:"button",disabled:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status},slot:"button",model:{value:t.oFormData.companyType,callback:function(o){t.$set(t.oFormData,"companyType",o)},expression:"oFormData.companyType"}},[t._l(t.$store.getters.oBasicInfo["企业类型"].info,function(o,s){return[a("van-checkbox",{key:s,staticStyle:{"margin-bottom":"7px"},attrs:{name:o,shape:"square"}},[t._v(t._s(o))])]})],2)],1)],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"原料来源",required:"",disabled:"","error-message":t.oErrMsg.sourceErrMsg},on:{blur:function(o){t.handleInputBlur("source","array")}}},[a("van-checkbox-group",{attrs:{slot:"button",disabled:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status},slot:"button",model:{value:t.oFormData.source,callback:function(o){t.$set(t.oFormData,"source",o)},expression:"oFormData.source"}},[t._l(t.$store.getters.oBasicInfo["原料来源"].info,function(o,s){return[a("van-checkbox",{key:s,staticStyle:{"margin-bottom":"7px"},attrs:{name:o,shape:"square"}},[t._v(t._s(o))])]})],2)],1)],1),t._v(" "),a("van-checkbox",{staticClass:"checkbox-label",attrs:{disabled:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,shape:"square"},model:{value:t.oFormData.outCityCompany,callback:function(o){t.$set(t.oFormData,"outCityCompany",o)},expression:"oFormData.outCityCompany"}},[t._v("\n      省（市）外企业主要：\n    ")]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,placeholder:"请输入企业名称，以逗号分隔",type:"textarea",rows:"2"},model:{value:t.oFormData.outCityCompanyName,callback:function(o){t.$set(t.oFormData,"outCityCompanyName",o)},expression:"oFormData.outCityCompanyName"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"（木材）原料主要品种",placeholder:"请输入原料主要品种，以逗号分隔",required:"",type:"textarea",rows:"2","error-message":t.oErrMsg.kindErrMsg},on:{blur:function(o){t.handleInputBlur("kind","string")}},model:{value:t.oFormData.kind,callback:function(o){t.$set(t.oFormData,"kind",o)},expression:"oFormData.kind"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("p",{staticClass:"title"},[t._v("企业生产能力")]),t._v(" "),a("van-row",[a("van-col",{attrs:{span:"12"}},[a("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"台锯数量",placeholder:"数量"},model:{value:t.oFormData.saw,callback:function(o){t.$set(t.oFormData,"saw",o)},expression:"oFormData.saw"}},[a("span",{staticStyle:{color:"#333333"},attrs:{slot:"button"},slot:"button"},[t._v("套")])])],1)],1),t._v(" "),a("van-col",{attrs:{span:"12"}},[a("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"日生产量 ",placeholder:"生产量"},model:{value:t.oFormData.sawOutput,callback:function(o){t.$set(t.oFormData,"sawOutput",o)},expression:"oFormData.sawOutput"}},[a("span",{staticStyle:{color:"#333333"},attrs:{slot:"button"},slot:"button"},[t._v("m³")])])],1)],1)],1),t._v(" "),a("van-row",[a("van-col",{attrs:{span:"12"}},[a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"其他设备",placeholder:"数量"},model:{value:t.oFormData.other,callback:function(o){t.$set(t.oFormData,"other",o)},expression:"oFormData.other"}},[a("span",{staticStyle:{color:"#333333"},attrs:{slot:"button"},slot:"button"},[t._v("套")])])],1)],1),t._v(" "),a("van-col",{attrs:{span:"12"}},[a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"日生产量 ",placeholder:"生产量"},model:{value:t.oFormData.otherOutput,callback:function(o){t.$set(t.oFormData,"otherOutput",o)},expression:"oFormData.otherOutput"}},[a("span",{staticStyle:{color:"#333333"},attrs:{slot:"button"},slot:"button"},[t._v("m³")])])],1)],1)],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"主要产品",placeholder:"请输入主要产品"},model:{value:t.oFormData.product,callback:function(o){t.$set(t.oFormData,"product",o)},expression:"oFormData.product"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("p",{staticClass:"title"},[t._v("产品销售")]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"主要销售区域",placeholder:"请输入销售区域名称"},model:{value:t.oFormData.saleArea,callback:function(o){t.$set(t.oFormData,"saleArea",o)},expression:"oFormData.saleArea"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,label:"月销售量",placeholder:"请输入销售量"},model:{value:t.oFormData.saleMount,callback:function(o){t.$set(t.oFormData,"saleMount",o)},expression:"oFormData.saleMount"}},[a("span",{staticStyle:{color:"#333333"},attrs:{slot:"button"},slot:"button"},[t._v("m³")])])],1),t._v(" "),a("p",{staticClass:"title"},[t._v("备注")]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[a("van-field",{attrs:{readonly:1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status,placeholder:"请输入备注",type:"textarea",rows:"2"},model:{value:t.oFormData.remark,callback:function(o){t.$set(t.oFormData,"remark",o)},expression:"oFormData.remark"}},[a("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),a("div",{staticClass:"btn-info change-button-background"},[a("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:t.next}},[t._v("下一步")])],1)],1):t._e(),t._v(" "),"picture"==t.sComponent?a("div",{staticClass:"picture"},[a("div",{staticClass:"card"},[a("p",{staticClass:"title-pic",staticStyle:{margin:"0 0 22px 0","padding-top":"37px"}},[t._v("企业营业执照")]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"padding-bottom":"26px"},attrs:{border:!1}},[a("upload-picture",{attrs:{sPictureUrl:t.oFormData.licencePic,fSetPicturUrl:t.setLicencePictureUrl,canUpload:!(1==t.$store.getters.oCompanyInfo.status||4==t.$store.getters.oCompanyInfo.status)}})],1),t._v(" "),a("p",{staticClass:"title-pic",staticStyle:{margin:"25px 0 10px 0"}},[t._v("法人身份证")]),t._v(" "),a("p",{staticClass:"tip-pic"},[t._v("需上传清晰的身份证正反面照片")]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"padding-bottom":"26px"},attrs:{border:!1}},[a("div",{staticStyle:{display:"flex"}},[a("upload-picture",{staticStyle:{"margin-right":"15px"},attrs:{sPictureUrl:t.oFormData.cardFrontPic,fSetPicturUrl:t.setCardFrontPictureUrl,canUpload:!(1==t.$store.getters.oCompanyInfo.status||4==t.$store.getters.oCompanyInfo.status)}}),t._v(" "),a("upload-picture",{attrs:{sPictureUrl:t.oFormData.cardOppositePic,fSetPicturUrl:t.setCardOppositePictureUrl,canUpload:!(1==t.$store.getters.oCompanyInfo.status||4==t.$store.getters.oCompanyInfo.status)}})],1)]),t._v(" "),a("div",{staticClass:"flex-space-between"},[a("p",{staticClass:"title-pic download-title"},[t._v("林业植物检疫监管告知书")]),t._v(" "),a("p",{staticClass:"download download-title",on:{click:function(o){t.savePic2SysGallery("林业植物检疫监管告知书")}}},[t._v("下载")])]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"padding-bottom":"26px"},attrs:{border:!1}},[a("upload-picture",{attrs:{sPictureUrl:t.oFormData.notificationPic,fSetPicturUrl:t.setNotificationPictureUrl,canUpload:!(1==t.$store.getters.oCompanyInfo.status||4==t.$store.getters.oCompanyInfo.status)}})],1),t._v(" "),a("div",{staticClass:"flex-space-between"},[a("p",{staticClass:"title-pic download-title"},[t._v("木材调运检疫开证承诺书")]),t._v(" "),a("p",{staticClass:"download download-title",on:{click:function(o){t.savePic2SysGallery("木材调运检疫开证承诺书")}}},[t._v("下载")])]),t._v(" "),a("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"padding-bottom":"26px"},attrs:{border:!1}},[a("upload-picture",{attrs:{sPictureUrl:t.oFormData.commitPic,fSetPicturUrl:t.setCommitPictureUrl,canUpload:!(1==t.$store.getters.oCompanyInfo.status||4==t.$store.getters.oCompanyInfo.status)}})],1)],1),t._v(" "),a("div",{staticClass:"btn-pic change-button-background"},[2===t.$store.getters.oCompanyInfo.status||3===t.$store.getters.oCompanyInfo.status||t.$window.$storage.get("isReg")?a("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:t.submit}},[t._v("提交企业信息")]):t._e(),t._v(" "),1===t.$store.getters.oCompanyInfo.status||4===t.$store.getters.oCompanyInfo.status?a("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:function(o){t.$router.push({name:"setEmployee"})}}},[t._v("\n          查看业务员信息\n        ")]):t._e()],1)]):t._e()],1)},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(t){a("FLES")},"data-v-8250d898",null);o.default=u.exports}});
//# sourceMappingURL=10.e0ded71ba3a1d1190a21.js.map