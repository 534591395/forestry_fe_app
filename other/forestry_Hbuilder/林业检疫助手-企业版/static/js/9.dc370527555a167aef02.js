webpackJsonp([9],{"68di":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Xxa5"),s=o.n(n),r=o("exGp"),a=o.n(r),i={name:"Register",beforeDestroy:function(){clearInterval(this.nTimer)},computed:{sBackIcon:function(){return"info"==this.sComponent?"transparent":""}},data:function(){return{bShowPwd:!1,sComponent:"info",sSendCodeContent:"发送验证码",nSecond:0,nTimer:-1,oErrMsg:{sUsernameErrMsg:"",sPasswordErrMsg:"",sCodeErrMsg:""},oLoginFormData:{sUsername:"",sPassword:"",sCode:""}}},methods:{submit:function(){var t=this,e=!1;""==this.oLoginFormData.sUsername&&(this.oErrMsg.sUsernameErrMsg="此项不能为空",e=!0),""==this.oLoginFormData.sPassword&&(this.oErrMsg.sPasswordErrMsg="此项不能为空",e=!0),""==this.oLoginFormData.sCode&&(this.oErrMsg.sCodeErrMsg="此项不能为空",e=!0),e||this.$http({url:"/auth/regUser",method:"POST",data:{username:this.oLoginFormData.sUsername,password:this.oLoginFormData.sPassword,code:this.oLoginFormData.sCode}}).then(function(e){e&&0==e.data.code&&(t.$toast.success("注册成功，请登陆"),t.skipNewPath("login"))})},getCode:function(t){var e=this;this.$http({url:"/auth/getCode4RegAndResetPwd",method:"GET",params:{phone:this.oLoginFormData.sUsername,type:"reg"}}).then(function(o){o&&0==o.data.code&&(e.$toast.success("验证码已发送"),t&&t())})},sendCode:function(){var t=this;this.handleInputBlur("sUsername"),""==this.oErrMsg.sUsernameErrMsg&&this.getCode(function(){t.nSecond=60,document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="none",document.querySelectorAll("#sendCodeBtn")[0].style.color="#ccc",t.sSendCodeContent=t.nSecond+"秒后重新发送验证码",t.nTimer=setInterval(function(){t.sSendCodeContent=--t.nSecond+"秒后重新发送验证码",0==t.nSecond&&(clearInterval(t.nTimer),document.querySelectorAll("#sendCodeBtn")[0]&&(document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="auto"),document.querySelectorAll("#sendCodeBtn")[0]&&(document.querySelectorAll("#sendCodeBtn")[0].style.color="#01B6AF"),t.sSendCodeContent="发送验证码")},1e3)})},handleInputBlur:function(t){""==this.oLoginFormData[t]?this.oErrMsg[t+"ErrMsg"]="此项不能为空":this.oErrMsg[t+"ErrMsg"]=""},confirmDownload:function(t){var e=this;return a()(s.a.mark(function o(){return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$store.dispatch("savePic2SysGallery",{sType:t,oVm:e});case 2:e.$dialog.confirm({title:"提示",message:"已自动保存至手机相册",confirmButtonText:"跳过",cancelButtonText:"查看"}).then(function(){e.sComponent="form"}).catch(function(){window.plus.gallery.pick()});case 3:case"end":return o.stop()}},o,e)}))()},changeShowPwd:function(){this.bShowPwd=!this.bShowPwd},skipNewPath:function(t){this.$router.push({name:t})},goForm:function(){this.sComponent="form",0!=this.nSecond&&this.$nextTick(function(){document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="none",document.querySelectorAll("#sendCodeBtn")[0].style.color="#ccc"})},goback:function(t){t||(this.sComponent="info")}}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"register"},[o("div",{staticClass:"login-wrapper"},[o("van-icon",{attrs:{name:"arrow-left",size:"23px",color:t.sBackIcon},on:{click:function(e){t.goback(t.sBackIcon)}}}),t._v(" "),o("a",{staticClass:"login",attrs:{href:"javascript: void(0);"},on:{click:function(e){t.skipNewPath("login")}}},[t._v("登陆")])],1),t._v(" "),t._m(0),t._v(" "),"info"==t.sComponent?o("div",{staticClass:"info-component"},[t._m(1),t._v(" "),o("div",{staticClass:"link"},[o("a",{attrs:{href:"javascript: void(0);"},on:{click:function(e){t.confirmDownload("林业植物检疫监管告知书")}}},[t._v("下载《林业植物检疫监管告知书》")]),t._v(" "),o("a",{attrs:{href:"javascript: void(0);"},on:{click:function(e){t.confirmDownload("木材调运检疫开证承诺书")}}},[t._v("下载《木材调运检疫开证承诺书》")])]),t._v(" "),o("div",{staticClass:"btn-confirm change-button-background"},[o("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:t.goForm}},[t._v("已下载")])],1),t._v(" "),t._m(2)]):t._e(),t._v(" "),"form"==t.sComponent?o("div",{staticClass:"form-component"},[o("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"30px","margin-bottom":"20px"},attrs:{border:!1}},[o("van-field",{attrs:{placeholder:"请输入手机号","left-icon":"phone-o",type:"number","error-message":t.oErrMsg.sUsernameErrMsg},on:{blur:function(e){t.handleInputBlur("sUsername")}},model:{value:t.oLoginFormData.sUsername,callback:function(e){t.$set(t.oLoginFormData,"sUsername",e)},expression:"oLoginFormData.sUsername"}},[o("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),o("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-bottom":"20px"},attrs:{border:!1}},[o("van-field",{attrs:{placeholder:"登录密码（6-18位、数字组合）","left-icon":"bag-o","right-icon":t.bShowPwd?"closed-eye":"eye-o","error-message":t.oErrMsg.sPasswordErrMsg,type:t.bShowPwd?"":"password"},on:{"click-right-icon":t.changeShowPwd,blur:function(e){t.handleInputBlur("sPassword")}},model:{value:t.oLoginFormData.sPassword,callback:function(e){t.$set(t.oLoginFormData,"sPassword",e)},expression:"oLoginFormData.sPassword"}})],1),t._v(" "),o("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},[o("van-field",{attrs:{placeholder:"短信验证码","left-icon":"label-o",type:"number","error-message":t.oErrMsg.sCodeErrMsg},on:{blur:function(e){t.handleInputBlur("sCode")}},model:{value:t.oLoginFormData.sCode,callback:function(e){t.$set(t.oLoginFormData,"sCode",e)},expression:"oLoginFormData.sCode"}},[o("a",{staticClass:"send-code",attrs:{slot:"button",id:"sendCodeBtn",href:"javascript: void(0);"},on:{click:t.sendCode},slot:"button"},[t._v("\n          "+t._s(t.sSendCodeContent)+"\n        ")])])],1),t._v(" "),o("div",{staticClass:"btn-reg change-button-background"},[o("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:t.submit}},[t._v("注册")])],1)],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-wrapper"},[e("img",{staticClass:"img",attrs:{src:o("vRwt"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text"},[e("p",[this._v("因企业注册需要")]),this._v(" "),e("p",[this._v("请先下载以下告知书，认真阅读并签字盖章")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"agree-text flex-center-x",staticStyle:{color:"#999999","margin-top":"17px"}},[this._v("\n      注册即视为同意\n      "),e("a",{staticClass:"agree-text",staticStyle:{color:"#01B6AF"},attrs:{href:"javascript: void(0);"}},[this._v("\n        《用户服务协议》\n      ")])])}]};var l=o("VU/8")(i,c,!1,function(t){o("YWbg")},"data-v-ae3eef8c",null);e.default=l.exports},YWbg:function(t,e){}});
//# sourceMappingURL=9.dc370527555a167aef02.js.map