webpackJsonp([5],{DbVy:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={name:"ResetPwd",components:{Confirm:e("XG+O").a},beforeDestroy:function(){clearInterval(this.nTimer)},data:function(){return{bShowPwd:!1,sSendCodeContent:"发送验证码",sComponent:"content",nSecond:0,nTimer:-1,oErrMsg:{sUsernameErrMsg:"",sPasswordErrMsg:"",sConfirmPasswordErrMsg:"",sCodeErrMsg:""},oLoginFormData:{sUsername:"",sPassword:"",sConfirmPassword:"",sCode:""}}},methods:{submit:function(){var t=this,s=!1;""==this.oLoginFormData.sUsername&&(this.oErrMsg.sUsernameErrMsg="此项不能为空",s=!0),""==this.oLoginFormData.sPassword&&(this.oErrMsg.sPasswordErrMsg="此项不能为空",s=!0),""==this.oLoginFormData.sConfirmPassword&&(this.oErrMsg.sConfirmPasswordErrMsg="此项不能为空",s=!0),""==this.oLoginFormData.sCode&&(this.oErrMsg.sCodeErrMsg="此项不能为空",s=!0),s||(this.oLoginFormData.sPassword==this.oLoginFormData.sConfirmPassword?this.$http({url:"/auth/forgetPwd",method:"POST",data:{username:this.oLoginFormData.sUsername,password:this.oLoginFormData.sPassword,code:this.oLoginFormData.sCode}}).then(function(s){s&&0==s.data.code&&(t.sComponent="confirm")}):this.$toast("密码输入不一致"))},getCode:function(t){var s=this;this.$http({url:"/auth/getCode4RegAndResetPwd",method:"GET",params:{phone:this.oLoginFormData.sUsername,type:"resetPwd"}}).then(function(e){e&&0==e.data.code&&(s.$toast.success("验证码已发送"),t&&t())})},sendCode:function(){var t=this;this.handleInputBlur("sUsername"),""==this.oErrMsg.sUsernameErrMsg&&this.getCode(function(){t.nSecond=60,document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="none",document.querySelectorAll("#sendCodeBtn")[0].style.color="#ccc",t.sSendCodeContent=t.nSecond+"秒后重新发送验证码",t.nTimer=setInterval(function(){t.sSendCodeContent=--t.nSecond+"秒后重新发送验证码",0==t.nSecond&&(clearInterval(t.nTimer),document.querySelectorAll("#sendCodeBtn")[0]&&(document.querySelectorAll("#sendCodeBtn")[0].style["pointer-events"]="auto"),document.querySelectorAll("#sendCodeBtn")[0]&&(document.querySelectorAll("#sendCodeBtn")[0].style.color="#01B6AF"),t.sSendCodeContent="发送验证码")},1e3)})},handleInputBlur:function(t){""==this.oLoginFormData[t]?this.oErrMsg[t+"ErrMsg"]="此项不能为空":this.oErrMsg[t+"ErrMsg"]=""},changeShowPwd:function(){this.bShowPwd=!this.bShowPwd},cancel:function(){this.$router.push({name:"login"})}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"resetPwd"},["content"==t.sComponent?e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[e("a",{staticClass:"cancel",attrs:{href:"javascript: void(0);"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),t._m(0)]),t._v(" "),t._m(1),t._v(" "),e("van-cell-group",{staticClass:"van-hairline--bottom",attrs:{border:!1}},[e("van-field",{attrs:{placeholder:"请输入注册时用的手机号","left-icon":"phone-o",type:"number","error-message":t.oErrMsg.sUsernameErrMsg},on:{blur:function(s){return t.handleInputBlur("sUsername")}},model:{value:t.oLoginFormData.sUsername,callback:function(s){t.$set(t.oLoginFormData,"sUsername",s)},expression:"oLoginFormData.sUsername"}},[e("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),e("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[e("van-field",{attrs:{placeholder:"请输入新密码（6-18位、数字组合）","left-icon":"bag-o","right-icon":t.bShowPwd?"closed-eye":"eye-o","error-message":t.oErrMsg.sPasswordErrMsg,type:t.bShowPwd?"":"password"},on:{"click-right-icon":t.changeShowPwd,blur:function(s){return t.handleInputBlur("sPassword")}},model:{value:t.oLoginFormData.sPassword,callback:function(s){t.$set(t.oLoginFormData,"sPassword",s)},expression:"oLoginFormData.sPassword"}})],1),t._v(" "),e("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[e("van-field",{attrs:{placeholder:"请再次输入新密码","left-icon":"bag-o","error-message":t.oErrMsg.sConfirmPasswordErrMsg,type:t.bShowPwd?"":"password"},on:{blur:function(s){return t.handleInputBlur("sConfirmPassword")}},model:{value:t.oLoginFormData.sConfirmPassword,callback:function(s){t.$set(t.oLoginFormData,"sConfirmPassword",s)},expression:"oLoginFormData.sConfirmPassword"}},[e("span",{staticStyle:{color:"transparent"},attrs:{slot:"button"},slot:"button"},[t._v("1")])])],1),t._v(" "),e("van-cell-group",{staticClass:"van-hairline--bottom",staticStyle:{"margin-top":"1px"},attrs:{border:!1}},[e("van-field",{attrs:{placeholder:"短信验证码","left-icon":"label-o",type:"number","error-message":t.oErrMsg.sCodeErrMsg},on:{blur:function(s){return t.handleInputBlur("sCode")}},model:{value:t.oLoginFormData.sCode,callback:function(s){t.$set(t.oLoginFormData,"sCode",s)},expression:"oLoginFormData.sCode"}},[e("a",{staticClass:"send-code",attrs:{slot:"button",id:"sendCodeBtn",href:"javascript: void(0);"},on:{click:t.sendCode},slot:"button"},[t._v("\n          "+t._s(t.sSendCodeContent)+"\n        ")])])],1),t._v(" "),e("div",{staticClass:"btn change-button-background"},[e("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:t.submit}},[t._v("确认")])],1)],1):t._e(),t._v(" "),"confirm"==t.sComponent?e("div",{staticClass:"confirm-component"},[e("Confirm",{attrs:{sContentTop:"重置密码成功",sContentBottom:"1",sBtnText:"返回登录",fhandleBtnClick:t.cancel}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title-wrapper"},[s("span",{staticClass:"title"},[this._v("重置密码")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"img-wrapper"},[s("img",{staticClass:"img",attrs:{src:e("vRwt"),alt:""}})])}]};var r=e("VU/8")(o,n,!1,function(t){e("eXjS")},"data-v-716cac88",null);s.default=r.exports},"XG+O":function(t,s,e){"use strict";var o={name:"Confirm",props:{sContentTop:{type:String,required:!0},sContentBottom:{type:String,required:!0},sBtnText:{type:String,required:!0},fhandleBtnClick:{type:Function,required:!0}},data:function(){return{}},methods:{}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"confirm"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},[e("p",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.sContentTop))]),t._v(" "),e("p",{class:{hide:"1"==t.sContentBottom},staticStyle:{"font-size":"16px","margin-top":"15px"}},[t._v(t._s(t.sContentBottom))])]),t._v(" "),e("div",{staticClass:"btn change-button-background"},[e("van-button",{attrs:{size:"large",round:"",type:"primary"},on:{click:t.fhandleBtnClick}},[t._v(t._s(t.sBtnText))])],1)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"img-wrapper"},[s("img",{staticClass:"img",attrs:{src:e("khoF"),alt:""}})])}]};var r=e("VU/8")(o,n,!1,function(t){e("bWXh")},"data-v-aa57a94e",null);s.a=r.exports},bWXh:function(t,s){},eXjS:function(t,s){},khoF:function(t,s,e){t.exports=e.p+"static/img/confirm.585b0a5.png"}});
//# sourceMappingURL=5.d26db5ffbe6c2adff44e.js.map